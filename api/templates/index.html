<!DOCTYPE html>
<html lang="en" data-bs-theme="dark">
<head>
    {% include 'partials/head.html' %}
    <title>Search</title>
</head>
<body>
{% include 'partials/navbar.html' %}

<div class="container-sm mt-5 mb-3">
    <form id="imageSearchForm" onsubmit="imageSearchRequest()">


        <input type="text" class="form-control" placeholder="Add a tag then press comma or Enter" id="imageSearchTagInput">
        <button class="btn btn-outline-secondary d-none" type="submit"></button>



    </form>
    <script>
        function imageSearchRequest(){
            let tags = document.getElementById('imageSearchTagInput').value;
            // on firefox prevents NS_BINDING_ERROR because submit button overwrite
            event.preventDefault()
            try {
                const xhttp = new XMLHttpRequest();
                xhttp.onload = function() {
                    let images = JSON.parse(this.responseText);
                    if (images == null){
                        return;
                    }
                    let results = document.getElementById('searchResults');

                    images.forEach(function(value, index, array){
                        console.log(value)

                    })

                }
                xhttp.open("GET", "/search?labels=" + JSON.stringify(tags.split(",")));
                xhttp.send();
            } catch (error) {
                console.log("Fehler bei der Anfrage: " + error.message)
            }
        }
        


    </script>

    <div id="">

    </div>
</div>



{% include 'partials/footer.html' %}
    <script>
      const example = UseBootstrapTag(document.getElementById('imageSearchTagInput'))
    </script>
</body>
</html>
